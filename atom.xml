<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>菜鸟的自由天空</title>
  <subtitle>从这里起飞，世界都在脚下</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-06-23T11:18:38.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>thomaslee</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>在mac上部署HyperLedger Fabric 1.0</title>
    <link href="http://yoursite.com/2017/06/23/deploy-fabric-on-mac/"/>
    <id>http://yoursite.com/2017/06/23/deploy-fabric-on-mac/</id>
    <published>2017-06-23T07:52:01.000Z</published>
    <updated>2017-06-23T11:18:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近在学习区块链框架<a href="https://www.hyperledger.org/projects/fabric" target="_blank" rel="external">HyperLedger Fabric</a>，其当前的最新版本为1.0.0 Beta。为方便体验，需要在本地的mac上先部署起来。由于目前相关的中文资料很少，主要参考的是<a href="http://hyperledger-fabric.readthedocs.io/en/latest/" target="_blank" rel="external">官方文档</a>，还有网上一些零星的文章。</p>
<hr>
<p>先将Fabric工程下载一份到本地（这里为方便说明，存在个人目录）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd ~</div><div class="line">git clone git@github.com:hyperledger/fabric.git</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><blockquote>
<p>为了方便部署，Fabric提供了Docker镜像，但我们得先将Docker环境搭建起来。Mac上搭建Docker环境，可以通过<a href="https://www.docker.com/products/docker-toolbox" target="_blank" rel="external">Docker ToolBox</a>来安装，其中会包括一些列的工具，感兴趣的朋友可以关注下其<a href="https://docs.docker.com/toolbox/overview/#whats-in-the-box" target="_blank" rel="external">文档</a>。由于是初学，我准备不使用该工具，而是从基础开始一步步来搭建。</p>
</blockquote>
<h3 id="安装VirtualBox、Vagrant"><a href="#安装VirtualBox、Vagrant" class="headerlink" title="安装VirtualBox、Vagrant"></a>安装VirtualBox、Vagrant</h3><p>由于Docker是基于Linux容器技术LXC， 不能直接部署在mac的OS X系统上，因此在mac上需要先搭建一个Linux的虚拟环境。</p>
<ul>
<li><p>这就要借助VirtualBox虚拟出一个Linux环境，<a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="external">下载VirtualBox</a>OS X版本并安装即可。</p>
</li>
<li><p>Vagrant是虚拟机管理工具，底层支持VirtualBox作为虚拟机系统，可以在<a href="http://blog.csdn.net/wangjianno2/article/details/53728883" target="_blank" rel="external">参考这里</a>做些了解。<a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="external">下载Vagrant</a>的OS X版本安装即可。</p>
</li>
</ul>
<blockquote>
<p>还有个工具<a href="https://github.com/boot2docker/boot2docker#installation" target="_blank" rel="external">boot2docker</a>可以更方便的直接mac下用命令管理docker（当然前提也得安装VirtualBox），感兴趣可以关注下，这里我也没有安装这个工具，而是进入到VirtualBox中使用docker。</p>
</blockquote>
<h3 id="启动虚拟机"><a href="#启动虚拟机" class="headerlink" title="启动虚拟机"></a>启动虚拟机</h3><p><br>进入<code>git clone</code>到本地个人目录的fabric工程下<code>devenv</code>目录，会看到有个<code>Vagrantfile</code>文件，在该目录下执行以下命令。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd fabric/devenv</div><div class="line">vagrant up</div><div class="line">vagrant ssh</div></pre></td></tr></table></figure></p>
<pre><code>其中`vagrant up`命令执行时间会很长，它会现在ubuntu虚拟机，将其启动后进行初始化环境，包括go、docker等安装，需要耐心等待。
</code></pre><p>执行成功就会看到以下信息:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">➜  devenv git:(v1.0.0-preview) vagrant ssh                  </div><div class="line"></div><div class="line">Welcome to Ubuntu 16.04.1 LTS (GNU/Linux 4.4.0-59-generic x86_64)</div><div class="line"></div><div class="line"> * Documentation:  https://help.ubuntu.com</div><div class="line"> * Management:     https://landscape.canonical.com</div><div class="line"> * Support:        https://ubuntu.com/advantage</div><div class="line"></div><div class="line">0 packages can be updated.</div><div class="line">0 updates are security updates.</div><div class="line"></div><div class="line"></div><div class="line">Last login: Thu Jun 22 05:15:17 2017 from 10.0.2.2</div><div class="line">vagrant@hyperledger-devenv:v0.3.0-c7b3fe0:/opt/gopath/src/github.com/hyperledger/fabric$</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="Fabric部署"><a href="#Fabric部署" class="headerlink" title="Fabric部署"></a>Fabric部署</h2><p>由于在部署过程中需要下载大量fabric相关的docker镜像，国外镜像源是在没法忍，一定要先将源切换到国内，阿里云上有：</p>
<p>在虚拟机内部：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo cp -n /lib/systemd/system/docker.service /etc/systemd/system/docker.service</div><div class="line">sudo sed -i &quot;s|ExecStart=/usr/bin/dockerd|ExecStart=/usr/bin/dockerd --registry-mirror=https://pee6w651.mirror.aliyuncs.com|g&quot; /etc/systemd/system/docker.service</div><div class="line">sudo systemctl daemon-reload</div><div class="line">sudo service docker restart</div></pre></td></tr></table></figure></p>
<p>然后执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd ~</div><div class="line">mkdir fabric-sample</div><div class="line">cd fabric-sample</div><div class="line">sh /opt/gopath/src/github.com/hyperledger/fabric/scripts/bootstrap-1.0.0-beta.sh</div></pre></td></tr></table></figure></p>
<p>执行后会下载fabric相关的docker镜像，非一般的速度，也需要耐心等待。</p>
<hr>
<blockquote>
<p>由于在虚拟机启动的时候，已经自动帮我们做了很多初始化工作，比如go、docker、java、node等很多依赖的安装与初始化，对于其启动细节还不够了解，因此在下一篇文章中，我们会介绍在一台CentOS上如何部署Fabric。</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近在学习区块链框架&lt;a href=&quot;https://www.hyperledger.org/projects/fabric&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HyperLedger Fabric&lt;/a&gt;，其当前的最新版本为1.0.0 Beta
    
    </summary>
    
      <category term="区块链技术" scheme="http://yoursite.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="区块链" scheme="http://yoursite.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
      <category term="fabric" scheme="http://yoursite.com/tags/fabric/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2017/05/13/hello-world/"/>
    <id>http://yoursite.com/2017/05/13/hello-world/</id>
    <published>2017-05-13T02:14:22.000Z</published>
    <updated>2017-05-13T02:14:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
